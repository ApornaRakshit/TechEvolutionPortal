{% extends "home/base.html" %}
{% block title %}Roadmaps - TEP{% endblock %}

{% block content %}
<div class="container mx-auto py-10">
  <h1 class="text-3xl font-bold text-blue-600 mb-6">ðŸ“Œ Learning Roadmaps</h1>

  <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
    {% for roadmap in roadmaps %}
      <div class="bg-white rounded-xl shadow hover:shadow-xl hover:scale-105 transition transform overflow-hidden">

        <!-- Image -->
        <div class="h-40 bg-gray-200">
          {% if roadmap.image %}
            <!-- <img src="{{ roadmap.image.url }}" alt="{{ roadmap.title }}" class="w-full h-full object-cover"> -->
          {% else %}
            <div class="flex items-center justify-center h-full text-gray-400">No Image</div>
          {% endif %}
        </div>

        <!-- Content -->
        <div class="p-6">
          <h2 class="text-xl font-semibold text-gray-800">{{ roadmap.title }}</h2>
          <p class="text-gray-600 mt-2 text-sm">{{ roadmap.description|truncatewords:18 }}</p>

          <!-- Stats -->
          <div class="mt-3 text-sm text-gray-500">
            <span>{{ roadmap.tutorial_count }} Tutorials</span> | 
            <span>{{ roadmap.learners_count }} Learners</span> | 
            <span>Level: {{ roadmap.level }}</span>
          </div>

          <!-- Progress -->
          {% if roadmap.progress is not None %}
          <div class="mt-4">
            <div class="w-full bg-gray-200 rounded-full h-2" role="progressbar" aria-valuenow="{{ roadmap.progress|default:0 }}" aria-valuemin="0" aria-valuemax="100">
              <div class="bg-blue-600 h-2 rounded-full transition-all duration-500" style="width: {{ roadmap.progress|default:0 }}%;"></div>
            </div>
            <p class="mt-1 text-xs text-gray-500">Progress: {{ roadmap.progress|default:0 }}%</p>
          </div>
          {% endif %}

          <!-- Safe Start Learning Button -->
          <div class="mt-4">
            {% if roadmap.link %}
              <a href="{{ roadmap.link }}" target="_blank" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 text-sm font-semibold">
                Start Learning â†’
              </a>
            {% else %}
              <span class="text-gray-400 text-sm">Link not available</span>
            {% endif %}
          </div>

        </div>
      </div>
    {% empty %}
      <p class="text-gray-500 col-span-3 text-center">No roadmaps available yet.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
